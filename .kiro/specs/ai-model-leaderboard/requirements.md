# 需求文档

## 简介

本项目旨在构建一个 AI 大模型排行榜网站，汇聚市面上主流 AI 大模型的能力数据，从编码、推理、数学、多语言等多个维度进行排行展示。数据从可靠的第三方评测平台抓取，每 3 天自动更新，为用户提供直观、可交互的模型对比体验。

## 术语表

- **排行榜系统 (Leaderboard_System)**：本项目的核心 Web 应用，负责展示 AI 模型数据和排行
- **数据抓取器 (Data_Scraper)**：负责从第三方数据源抓取模型评测数据的后端组件
- **模型 (Model)**：指 AI 大语言模型，如 GPT-4、Claude、Gemini、Llama 等
- **评测维度 (Dimension)**：对模型能力进行评估的特定方面，如编码能力、推理能力等
- **数据源 (Data_Source)**：提供模型评测数据的可靠第三方平台，如 LMSYS Chatbot Arena、OpenLLM Leaderboard 等
- **评分 (Score)**：模型在某个评测维度上的量化得分
- **排行 (Ranking)**：模型在某个评测维度上按评分排列的名次

## 需求

### 需求 1：模型数据展示

**用户故事：** 作为一名 AI 从业者，我希望在一个页面上查看所有主流 AI 大模型的基本信息和评测数据，以便快速了解各模型的能力概况。

#### 验收标准

1. WHEN 用户访问排行榜首页, THE 排行榜系统 SHALL 展示一个包含所有已收录模型的数据表格
2. THE 排行榜系统 SHALL 为每个模型展示以下基本信息：模型名称、开发商、参数规模、是否开源、模型简介、评测覆盖维度数
3. THE 排行榜系统 SHALL 为每个模型展示各评测维度的评分数据
4. WHEN 用户点击某个模型名称, THE 排行榜系统 SHALL 展示该模型的详情页面，包含完整的评测数据和历史评分变化
5. IF 某个模型的评测数据缺失, THEN THE 排行榜系统 SHALL 在对应位置显示"暂无数据"或"-"标识，而非留空或显示错误

### 需求 2：多维度排行功能

**用户故事：** 作为一名开发者，我希望能从不同维度查看模型排行，以便根据我的具体需求选择最合适的模型。

#### 验收标准

1. THE 排行榜系统 SHALL 支持以下评测维度的排行：编码能力、推理能力、数学能力、多语言能力、指令遵循能力、知识问答能力
2. WHEN 用户选择某个评测维度, THE 排行榜系统 SHALL 按该维度的评分对所有模型进行降序排列
3. WHEN 用户选择"综合排行"选项, THE 排行榜系统 SHALL 基于所有维度的加权平均分对模型进行排序，且模型至少需覆盖一半以上维度才参与综合排名
4. THE 排行榜系统 SHALL 在排行列表中以视觉标识（如奖牌图标）突出显示前三名模型
5. WHEN 用户切换排行维度, THE 排行榜系统 SHALL 在不刷新页面的情况下更新排行结果
6. THE 排行榜系统 SHALL 默认展示前 30 名模型数据

### 需求 3：筛选与搜索功能

**用户故事：** 作为一名用户，我希望能通过筛选和搜索快速找到我关注的模型，以便高效地获取所需信息。

#### 验收标准

1. THE 排行榜系统 SHALL 提供按开发商筛选模型的功能
2. THE 排行榜系统 SHALL 提供按是否开源筛选模型的功能
3. THE 排行榜系统 SHALL 提供按参数规模范围筛选模型的功能
4. WHEN 用户在搜索框中输入关键词, THE 排行榜系统 SHALL 实时过滤并展示名称匹配的模型
5. WHEN 用户同时应用多个筛选条件, THE 排行榜系统 SHALL 以"与"逻辑组合所有条件并展示符合全部条件的模型
6. IF 筛选结果为空, THEN THE 排行榜系统 SHALL 显示友好的提示信息并建议用户调整筛选条件

### 需求 4：数据抓取与更新

**用户故事：** 作为系统管理员，我希望系统能自动从可靠数据源抓取最新的模型评测数据，以便排行榜始终展示最新信息。

#### 验收标准

1. THE 数据抓取器 SHALL 支持以下数据源：内置综合数据集（基于 LMSYS、Artificial Analysis、OpenLLM 公开数据整理）、Artificial Analysis API（可选，需配置 API Key）
2. WHEN 定时任务触发时, THE 数据抓取器 SHALL 自动执行数据抓取流程并更新数据库
3. THE 数据抓取器 SHALL 以每 3 天一次的频率执行定时抓取任务（凌晨 2:00），通过 Next.js instrumentation 在应用启动时自动开启
4. WHEN 数据抓取器获取到新数据, THE 数据抓取器 SHALL 对数据进行格式校验和去重处理后再写入数据库
5. IF 数据抓取过程中发生错误, THEN THE 数据抓取器 SHALL 记录错误日志，不重试，保留上一次成功抓取的数据不变
6. THE 数据抓取器 SHALL 将每次抓取的原始数据和处理后的数据分别存储，以便追溯
7. THE 排行榜系统 SHALL 在首页展示最后一次成功抓取的时间，并标注"每 3 天自动更新"
8. THE 排行榜系统 SHALL 提供 GET /api/scraper/trigger 接口查看抓取历史，POST /api/scraper/trigger 接口手动触发抓取

### 需求 5：数据对比功能

**用户故事：** 作为一名用户，我希望能选择多个模型进行直观对比，以便更清晰地了解不同模型之间的差异。

#### 验收标准

1. THE 排行榜系统 SHALL 允许用户选择 2 至 5 个模型进行对比
2. WHEN 用户选择模型进行对比, THE 排行榜系统 SHALL 以雷达图的形式展示所选模型在各维度上的评分对比
3. WHEN 用户选择模型进行对比, THE 排行榜系统 SHALL 同时以表格形式展示所选模型的详细数据对比
4. IF 用户尝试选择超过 5 个模型进行对比, THEN THE 排行榜系统 SHALL 提示用户已达到对比上限并阻止继续添加

### 需求 6：数据可视化

**用户故事：** 作为一名用户，我希望通过图表直观地了解模型能力分布和排行趋势，以便更好地理解数据。

#### 验收标准

1. THE 排行榜系统 SHALL 以柱状图形式展示当前维度下各模型的评分分布
2. THE 排行榜系统 SHALL 以折线图形式展示模型评分的历史变化趋势
3. WHEN 用户将鼠标悬停在图表数据点上, THE 排行榜系统 SHALL 显示该数据点的详细数值信息
4. THE 排行榜系统 SHALL 支持图表的缩放和平移操作，以便用户查看密集数据区域

### 需求 7：响应式设计与用户体验

**用户故事：** 作为一名用户，我希望在不同设备上都能流畅地使用排行榜网站，以便随时随地查看模型数据。

#### 验收标准

1. THE 排行榜系统 SHALL 适配桌面端（宽度 >= 1024px）、平板端（宽度 768px-1023px）和移动端（宽度 < 768px）三种布局
2. WHEN 页面加载时, THE 排行榜系统 SHALL 在 3 秒内完成首屏内容的渲染
3. THE 排行榜系统 SHALL 提供深色模式和浅色模式的切换功能
4. WHEN 数据正在加载时, THE 排行榜系统 SHALL 展示骨架屏或加载动画，避免页面出现空白状态
5. THE 排行榜系统 SHALL 为所有交互元素提供符合无障碍标准的键盘导航和屏幕阅读器支持

### 需求 8：数据来源展示

**用户故事：** 作为一名用户，我希望了解排行数据的来源和权威性，以便判断数据的可信度。

#### 验收标准

1. THE 排行榜系统 SHALL 在首页底部以悬浮栏形式展示核心数据来源
2. THE 排行榜系统 SHALL 为每个数据来源附带简短的权威性说明（如"百万级真人盲测投票"）
3. THE 排行榜系统 SHALL 为每个数据来源提供可点击的外部链接
